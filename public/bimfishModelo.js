!function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t,i){e.exports=function e(t,s,r){function n(a,l){if(!s[a]){if(!t[a]){if(!l&&i(1))return(void 0)(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=s[a]={exports:{}};t[a][0].call(h.exports,(function(e){return n(t[a][1][e]||e)}),h,h.exports,e,t,s,r)}return s[a].exports}for(var o=!1,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(e,t,i){"use strict";var s=0;function r(e,t){var i=t.data;if(Array.isArray(i)&&!(i.length<2)){var s=i[0],r=i[1],n=i[2],o=e._callbacks[s];o&&(delete e._callbacks[s],o(r,n))}}function n(e){var t=this;t._worker=e,t._callbacks={},e.addEventListener("message",(function(e){r(t,e)}))}n.prototype.postMessage=function(e){var t=this,i=s++,n=[i,e];return new Promise((function(e,s){if(t._callbacks[i]=function(t,i){if(t)return s(new Error(t.message));e(i)},void 0!==t._worker.controller){var o=new MessageChannel;o.port1.onmessage=function(e){r(t,e)},t._worker.controller.postMessage(n,[o.port2])}else t._worker.postMessage(n)}))},t.exports=n},{}]},{},[1])(1)},function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id=1},function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return u}));class s{constructor(e){this.viewer=e.viewer}getCenter(e){if(e)return[(e[0]+e[3])/2,(e[1]+e[4])/2,(e[2]+e[5])/2]}startExplode(e,t){if(!e||!Array.isArray(e))return;t||(t=3);let i=_.flattenDeep(e),s=this.viewer.getScene().getElementsBBox(i),r=this.getCenter(s),n=[],o=[];for(let e=0;e<i.length;e++){n.push([i[e]]);let s=this.viewer.getScene().getElementBBox(i[e]),a=this.getCenter(s),l=(a[0]-r[0])*t,c=(a[1]-r[1])*t,h=(a[2]-r[2])*t;o.push([l,c,h])}this.viewer.enterExplodedView(n,o)}endExplode(){this.viewer.quitExplodedView()}}class r{constructor(e){this.domId=e.domId,this.viewer=e.viewer,this.inputId=-1,this.selectElementTool=null,this.loadingDone1=!1,this.loadingDone2=!1,this.compareData={}}getModelCompareData(){return this.compareData}initModelCompare(){this.viewer&&(this.viewer.destroy(),this.viewer=null),this.viewer=new Modelo.View.Viewer3DCompare(this.domId),this.inputId=this.viewer.addInput(new Modelo.View.Input.Mouse(this.viewer)),this.selectElementTool=new Modelo.View.Tool.SelectElements(this.viewer),this.selectElementTool.setEnabled(!0),this.viewer.getCamera().setSplitPercentage(.5)}destroyModelCompare(){this.viewer&&(this.loadingDone1=!1,this.loadingDone2=!1,this.compareData={},this.viewer.destroy(),this.viewer=null)}setElementsColor(e){let t={},i={};e.newElements1.forEach(e=>{t[e]||(t[e]=1)}),e.newElements2.forEach(e=>{i[e]||(i[e]=1)}),e.modifiedElements1.forEach(e=>{t[e]||(t[e]=1)}),e.modifiedElements2.forEach(e=>{i[e]||(i[e]=1)});let s=Object.keys(t),r=Object.keys(i);this.viewer.focusElementsInViewport(0,s,!1),this.viewer.focusElementsInViewport(1,r,!1),this.viewer.getScene().cores[0].setElementsColor(e.newElements1,[1,0,0]),this.viewer.getScene().cores[1].setElementsColor(e.newElements2,[0,1,0]),this.viewer.getScene().cores[0].setElementsColor(e.modifiedElements1,[0,0,1]),this.viewer.getScene().cores[1].setElementsColor(e.modifiedElements2,[1,1,0])}modelCompare(e,t){if(this.viewer){if(!e||!t)throw new Error("modelCompare缺少leftModelId或rightModelId");this.viewer.loadModelAtViewport(e,0,null).then(()=>{if(console.log("leftModelId loading done"),this.loadingDone2)return Modelo.Model.compare(e,t);this.loadingDone1=!0}).then(e=>{e&&this.setElementsColor(e)}).catch(e=>{}),this.viewer.loadModelAtViewport(t,1,null).then(()=>{if(console.log("rightModelId loading done"),this.loadingDone1)return Modelo.Model.compare(e,t);this.loadingDone2=!0}).then(e=>{e&&this.setElementsColor(e)}).catch(e=>{})}}}class n{constructor(e){this.viewer=e.viewer,this.posList=[],this.iconList=[]}renderIcon({domId:e,eleAry:t,imgSrc:i,type:s="icon",size:r=20,callBack:n,props:o}){let a=document.getElementById(e);t.forEach(e=>{let t=this.viewer.getScene().getElementsBBox(["string"==typeof e?e:e.id]),l=document.createElement("img");l.setAttribute("src",i),l.style.width=r+"px",l.style.height=r+"px",l.style.cursor="pointer",l.setAttribute("type","modelIcon"),l.setAttribute("selfType",s),l.style.position="absolute",n&&l.addEventListener("click",()=>{n(e,o)}),this.posList.push(t),this.iconList.push(l),a.appendChild(l)})}updateViewer(){this.viewer.setUpdateCallback(()=>{this.iconList.forEach((e,t)=>{let i=this.viewer.getCamera().project(this.posList[t]);e.style.left=i[0]+"px",e.style.top=i[1]+"px"})})}clearIcon(e,t){let i=document.getElementById(e).getElementsByTagName("img");if(i&&i.length)if(t)for(let e=i.length-1;e>=0;e--)i[e].getAttribute("selfType")===t&&i[e].remove();else for(let e=i.length-1;e>=0;e--)"modelIcon"===i[e].getAttribute("type")&&i[e].remove()}setMark(e){this.renderIcon(e),this.updateViewer()}}class o{constructor(e){this.viewer=e.viewer,this.currentRulerType=-1,this.measureData=null,this.rulers=[new Modelo.View.Tool.MeasureLines(this.viewer),new Modelo.View.Tool.MeasureLine(this.viewer),new Modelo.View.Tool.MeasureLineStrip(this.viewer),new Modelo.View.Tool.MeasureLineFan(this.viewer),new Modelo.View.Tool.MeasureAngle(this.viewer),new Modelo.View.Tool.MeasureArea(this.viewer)],this.init()}init(){for(let e=0;e<this.rulers.length;e++)this.viewer.addTool(this.rulers[e]);this.endMeasure(),this.viewer.getEventEmitter().on("Measure-Update",e=>{console.log("Measure-Update"),this.measureData=e,console.log(e)}),this.viewer.getEventEmitter().on("Measure-DotUpdate",e=>{console.log("Measure-DotUpdate")})}endMeasure(){for(let e=0;e<this.rulers.length;e++)this.rulers[e].setEnabled(!1);this.currentRulerType=-1,this.measureData=null}setMeasureUnit(e){if(e)switch(Number(e)){case 1:this.rulers[this.currentRulerType].setUnit("m");break;case 2:this.rulers[this.currentRulerType].setUnit("cm");break;case 3:this.rulers[this.currentRulerType].setUnit("feet");break;case 4:this.rulers[this.currentRulerType].setUnit("inches");break;default:this.rulers[this.currentRulerType].setUnit("m")}}getMeasureData(){return this.measureData}startMeasure(e){e&&(e=Number(e),this.endMeasure(),this.rulers[e-1].setEnabled(!0),this.viewer.invalidate(),this.currentRulerType=e-1)}}class a{constructor(e){this.viewer=e.viewer,this.section=null,this.init()}init(){this.viewer.setSmartCullingEnabled(!1),this.section=new Modelo.View.Tool.Section(this.viewer),this.viewer.addTool(this.section)}startSection(){this.section.setEnabled(!0),this.section.setInteractive(!0),this.viewer.invalidate()}endSection(){this.section.setEnabled(!1),this.viewer.invalidate()}setSectionInteractive(e){this.section&&(this.section.setInteractive(e),this.viewer.invalidate())}resetSectionBox(){this.section&&(this.section.reset(),this.viewer.invalidate())}}class l{constructor(e){this.viewer=e.viewer}addText(e){let t=e.id,i=e.content,s=e.translation;if(!t||!i||!s)throw new Error("addText缺少id或content或translation");let r=[3,3,3];e.scaleArr&&(r=e.scaleArr);let n=[1,.3,.2];e.color&&(n=e.color);let o=new Modelo.View.Text3DBillboard(t,this.viewer.getResourceManager(),this.viewer.getMaterialManager());o.setContent(i),o.setTranslation(s[0],s[1],s[2]),o.setScaling(r[0],r[1],r[2]),o.setColor(n),o.setFaceCameraZ(!0),this.viewer.getScene().addText3D(o,!1)}deleteTextById(e){if(!e)throw new Error("deleteTextById缺少id");this.viewer.getScene().core.text3Ds.map(t=>{t.name===e&&this.viewer.getScene().removeText3D(t)})}deleteTextByReg(e){if(!e)throw new Error("deleteTextByReg缺少正则表达式");let t=e;this.viewer.getScene().core.text3Ds.map(e=>{t.test(e.name)&&this.viewer.getScene().removeText3D(e)})}deleteAllText(){this.viewer.getScene().core.text3Ds.map(e=>{this.viewer.getScene().removeText3D(e)})}}class c{constructor(e){this.viewer=e.viewer,this.cameraNavigator=new Modelo.View.Tool.CameraNavigator(this.viewer),this.pointAry=[]}start(e,t=.5,i=20){e&&e.length&&(this.pointAry=e,this.cameraNavigator.setSpeed(t),this.cameraNavigator.setRotationDuration(i),this.cameraNavigator.clearKeyPoints(),this.pointAry.forEach(e=>{this.cameraNavigator.addKeyPoint(e)}),this.cameraNavigator.start())}stop(){this.cameraNavigator.stop(),this.pointAry=[]}}class h{constructor(e){this.viewer=e.viewer,this.ribbon=null}setRibbon(e,t){this.viewer.setLazyRenderingEnabled(!1),this.ribbon=new Modelo.View.Visualize.AnimatingRibbon(this.viewer.getRenderScene()),this.ribbon.setEnabled(!0),this.viewer.getScene().addVisualize(this.ribbon),this.ribbon.setParameter("width",5),this.ribbon.setParameter("unitLenght",1e3),this.ribbon.setParameter("speed",1),this.ribbon.setParameter("platteTexture",t);for(let t in e){let i=e[t];this.ribbon.addRibbon(i)}this.viewer.setEffectParameter("Glow","intensity",.2)}clearRibbon(){this.ribbon.setEnabled(!1)}}class d{constructor(e){this.viewer=e.viewer,this.circle=null}setCircle(e){this.viewer.setEffectEnabled("Glow",!0),this.viewer.setLazyRenderingEnabled(!1),this.circle=new Modelo.View.Pawn("circle1",this.viewer.getResourceManager(),this.viewer.getMaterialManager());let t=new Image;t.src=e,t.onload=()=>{this.circle.createTexturedQuad(t),this.circle.setScaling(200,200,1),this.circle.setTranslation(115,63,0),this.viewer.getScene().addPawn(this.circle,!1),this.viewer.getRenderScene().getEffect("Glow").addPawn(this.circle),setInterval(()=>{this.circle.rotate(.01,[0,0,1],[115,63,0])},10)}}clearCircle(){this.viewer.getScene().removePawn(this.circle)}}class m{constructor(e){this.viewer=e.viewer,this.stripeArr=[],this.init()}init(){this.viewer.setLazyRenderingEnabled(!1)}setAnimatingStripe(e,t,i){if(!e||!t||!i.image)return;let s=i.width||50,r=i.unitLenght||5e4,n=i.speed||.4,o=new Modelo.View.Visualize.AnimatingStripe(this.viewer.getRenderScene());for(var a in o.setEnabled(!0),this.viewer.getScene().addVisualize(o),o.setParameter("width",s),o.setParameter("unitLenght",r),o.setParameter("speed",n),o.setParameter("platteTexture",i.image),t){let e=t[a];o.addStripe(e)}this.stripeArr.push({id:e,stripe:o})}removeAnimatingStripeById(e){e&&this.stripeArr.map((t,i)=>{t.id===e&&(this.viewer.getScene().removeVisualize(t.stripe),this.stripeArr.splice(i,1))})}clearAnimatingStripe(){this.stripeArr.map(e=>{this.viewer.getScene().removeVisualize(e.stripe)}),this.stripeArr=[]}}var w=i(0),g=i.n(w);class u{constructor(e){this.domId=e,this.appToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTI1LCJ1c2VybmFtZSI6ImJpbXV5dSIsImlzUGVybWFuZW50Ijp0cnVlLCJpYXQiOjE1NjA0MTE4OTAsImV4cCI6MzMwOTY0MTE4OTB9.dgURCUb7VoECsDokXOFOx8zxdjwFzSIEFGC0zjASDGw",this.viewer=null,this.mouseInput=null,this.selectElementTool=null,this.lastSelectElement=null,this.explodeManagerObject=null,this.modelCompareObject=null,this.measureManagerObject=null,this.sectionManagerObject=null,this.textManagerObject=null,this.ribbonObject=null,this.cirecleObject=null,this.animatingStripeObject=null,this.MEASURETYPE={LINES:1,LINE:2,LINESTRIP:3,LINEFAN:4,ANGEL:5,AREA:6},this.MEASUREUNIT={M:1,CM:2,FEET:3,INCHES:4},this.modelId=null,this.selectElements=[]}init(){this.domId&&this.appToken&&(this.viewer&&this.destroy(),Modelo.init({endpoint:"https://build-portal.modeloapp.com",appToken:this.appToken}),this.viewer=new Modelo.View.Viewer3D(this.domId,{isMobile:isMobile()}))}getViewer(){return this.viewer}destroy(){this.viewer&&(this.viewer.destroy(),this.viewer=null)}loadModel(e){const{modelId:t,modelLocalUrl:i,cameraInfo:s,callback:r}=e;t&&this.viewer&&(this.modelId=t,i?this.viewer.loadModel(t,{onProgress:e=>{},cameraInfo:s},!0,!0,i).then(e=>{this.initFrame(),r&&r(e)}):this.viewer.loadModel(t,e=>{}).then(e=>{this.initFrame(),r&&r(e)}))}initFrame(){this.mouseInput=new Modelo.View.Input.Mouse(this.viewer),this.viewer.addInput(this.mouseInput),this.viewer.addInput(new Modelo.View.Input.Touch(this.viewer)),this.viewer.addInput(new Modelo.View.Input.Keyboard(this.viewer)),this.measureManagerObject=new o({viewer:this.viewer}),this.sectionManagerObject=new a({viewer:this.viewer}),this.textManagerObject=new l({viewer:this.viewer}),this.cameraNavigatorObject=new c({viewer:this.viewer}),this.ribbonObject=new h({viewer:this.viewer}),this.cirecleObject=new d({viewer:this.viewer}),this.animatingStripeObject=new m({viewer:this.viewer}),this.selectElementTool=new Modelo.View.Tool.SelectElements(this.viewer),this.viewer.addTool(this.selectElementTool),this.initViewCube()}mousePickPosition(e){this.mouseInput.addMouseUpListener(t=>{let i=this.viewer.getCamera().unproject(t.x,t.y);e&&e(t,i)})}startExplode(e,t){this.explodeManagerObject||(this.explodeManagerObject=new s({viewer:this.viewer})),this.explodeManagerObject.startExplode(e,t)}endExplode(){this.explodeManagerObject&&this.explodeManagerObject.endExplode()}setModelVisible(e){this.modelId&&this.viewer.getScene().setModelVisibility(this.modelId,e)}pickOnlySelect(e=[1,0,0],t=!1,i){this.selectElementTool.setEnabled(!0),this.selectElementTool.setCloseUpEnabled(t),this.selectElementTool.setHighlightEnabled(!1),this.pickOnlySelectEvent=t=>{0===t.length?console.log("none is selected"):(this.lastSelectElement&&(this.viewer.getScene().setElementsColor(this.lastSelectElement,null),this.lastSelectElement=null),this.viewer.getScene().setElementsColor(t,e),this.lastSelectElement=t,this.selectElements=t),i&&i(t)},this.viewer.getEventEmitter().on("onElementSelected",this.pickOnlySelectEvent)}pickOnlyUnSelect(){this.selectElementTool.setEnabled(!1),this.selectElementTool.setCloseUpEnabled(!0),this.selectElementTool.setHighlightEnabled(!0),this.lastSelectElement&&(this.viewer.getScene().setElementsColor(this.lastSelectElement,null),this.lastSelectElement=null),this.selectElements=[],this.viewer.getEventEmitter().remove("onElementSelected",this.pickOnlySelectEvent),this.pickOnlySelectEvent=null}pickElement(e=[]){this.selectElementTool.setEnabled(!0),this.selectElementTool.pick(e,!0),this.selectElements=e}regionSelect(e){this.selectElementTool.setEnabled(!0),this.selectElementTool.setRegionSelectEnabled(!0),this.regionSelectEvent=t=>{0===t.length?console.log("none is selected"):(this.lastSelectElement&&(this.viewer.getScene().setElementsColor(this.lastSelectElement,null),this.lastSelectElement=null),this.selectElements=t),e&&e(t)},this.viewer.getEventEmitter().on("onElementSelected",this.regionSelectEvent)}regionUnSelect(){this.pickElement(),this.switchView(),this.selectElementTool.setEnabled(!1),this.selectElementTool.setRegionSelectEnabled(!1),this.selectElements=[],this.viewer.getEventEmitter().remove("onElementSelected",this.regionSelectEvent),this.regionSelectEvent=null}getSelectElements(){return this.selectElements}setElementsColor(e=[],t=[]){console.log(t),t?this.viewer.getScene().setElementsColor(e,[t[0]/255,t[1]/255,t[2]/255]):this.viewer.getScene().setElementsColor(e,null)}clearElementsColor(e=[]){this.viewer.getScene().setElementsColor(e,null)}setElementsVisible(e=[],t){this.viewer.getScene().setElementsVisibility(e,t)}getElementsProperties(e){return Modelo.BIM.getElementsProperties(this.modelId,e).then(e=>e)}startModelCompare(e,t){this.modelCompareObject||(this.modelCompareObject=new r({domId:this.domId,viewer:this.viewer})),this.modelCompareObject.initModelCompare(),this.modelCompareObject.modelCompare(e,t)}endModelCompare(){this.modelCompareObject&&this.modelCompareObject.destroyModelCompare()}screenCoordinate(e){if(e)return this.viewer.getCamera().project(e)}spaceCoordinate(e){if(e)return this.viewer.getCamera().unproject(e[0],e[1])}setMark(e){this.markManager||(this.markManager=new n({viewer:this.viewer})),this.markManager.setMark({domId:this.domId,...e})}clearMark(e){this.markManager&&this.markManager.clearIcon(this.domId,e)}setMeasureUnit(e){this.measureManagerObject&&this.measureManagerObject.setMeasureUnit(e)}startMeasure(e){this.measureManagerObject&&this.measureManagerObject.startMeasure(e)}getMeasureData(){if(this.measureManagerObject)return this.measureManagerObject.getMeasureData()}endMeasure(){this.measureManagerObject&&this.measureManagerObject.endMeasure()}switchView(e=6){this.viewer.getCamera().switchToView(e)}startSection(){this.sectionManagerObject&&this.sectionManagerObject.startSection()}setSectionInteractive(e){this.sectionManagerObject&&this.sectionManagerObject.setSectionInteractive(e)}endSection(){this.sectionManagerObject&&this.sectionManagerObject.endSection()}addText(e){this.textManagerObject&&this.textManagerObject.addText(e)}deleteTextById(e){this.textManagerObject&&this.textManagerObject.deleteTextById(e)}deleteTextByReg(e){this.textManagerObject&&this.textManagerObject.deleteTextByReg(e)}deleteAllText(){this.textManagerObject&&this.textManagerObject.deleteAllText()}getCameraData(){return this.viewer.getCamera().getData()}setCameraData(e,t=!0){e&&this.viewer.getCamera().setData(e,t)}focusElements(e=[],t=1){this.viewer.focusElements(e,t)}dumpScreen(e=960,t=640){return this.viewer.dumpScreen(e,t)}startCameraNavigator(e,t,i){this.cameraNavigatorObject&&this.cameraNavigatorObject.start(e,t,i)}stopCameraNavigator(){this.cameraNavigatorObject&&this.cameraNavigatorObject.stop()}getElementProperties(e){let t=this.viewer.getScene().getElementsNames(),i=[];t.map(t=>{i.push(Modelo.BIM.getElementProperties(e,t))}),Promise.all(i).then(e=>{console.log(e)}).catch(e=>{console.log(e)})}testWorker(){let e=new Worker("lib/worker.js"),t=new g.a(e),i=this.viewer.getScene().getElementsNames();t.postMessage({modelId:"j1mZemYb",name:i[0]}).then(e=>{console.log("response",e)}).catch(e=>{console.log("error",e)})}partElements(e){this.setModelVisible(!1),this.setElementsVisible(e,!0)}partEnableElements(e){this.setModelVisible(!0),this.setElementsVisible(e,!1)}shadowButton(e){this.viewer.setShadowEnabled(e)}ambientShadow(e){this.viewer.setEffectEnabled("SSAO",e)}specularShadow(e){this.viewer.setSpecularEnabled(e)}shadowRange(e){this.viewer.setLightingLatitude(e)}shadowRangeLong(e){this.viewer.setLightingLongitude(e)}shadowBrightness(e){this.viewer.setLightingIntensity(e)}getMaterialNames(e){if(e)return this.viewer.getScene().getElementMaterialNames(e)}changeMaterialColor(e,t){let i=this.viewer;e&&e.forEach((function(e){i.setMaterialParameter(e,"color",t)}))}clearMaterialColor(){}changeMaterialImage(e,t){let i=this.viewer;e&&(e.forEach((function(e){i.setMaterialParameter(e,"colorTexture",t)})),this.selectElementTool.pick([],!1))}setSkyBox(e){e&&Array.isArray(e)&&6===e.length&&(this.viewer.setBackgroundMode(Modelo.View.ViewBackground.CUBEMAP),this.viewer.setBackgroundImage(e))}setBackgroundColor(e=[1,1,1]){this.viewer.setBackgroundColor(e)}clearSkyBox(){this.viewer.setBackgroundMode(Modelo.View.ViewBackground.SOLIDCOLOR),this.viewer.setBackgroundColor([1,1,1])}setElementsGlow(e=[],t=[0,1,0],i=.5){this.viewer.setEffectEnabled("Glow",!0),this.viewer.getRenderScene().getEffect("Glow").addElements(e,{emissiveColor:t}),this.viewer.setEffectParameter("Glow","intensity",i)}clearElementsGlow(){this.viewer.setEffectEnabled("Glow",!1)}setGlobeGlowIntensity(e=.5){this.viewer.setEffectParameter("Glow","intensity",e)}setReflectionImages(e){e&&Array.isArray(e)&&this.viewer.setReflectionImages(e)}setContourLine(e){this.viewer.setEffectEnabled("Sketch",!0),this.viewer.setEffectParameter("Sketch","color",[e[0]/255,e[1]/255,e[2]/255]),this.viewer.setEffectParameter("Sketch","colored",!0)}setCoutourLineNone(){this.viewer.setEffectEnabled("Sketch",!1)}getElementCoordinates(e){let t=this.viewer.getScene().getElementsBBox(e);console.log(t)}setRibbon(){let e={path1:[[38.18899536132812,2.2801859378814697,16.108922958374023],[113.18899536132812,2.2801859378814697,16.108922958374023],[230.18899536132812,2.2801859378814697,16.108922958374023]],path2:[[38.18899536132812,2.2801859378814697,1.108922958374023],[113.18899536132812,2.2801859378814697,1.108922958374023],[230.18899536132812,2.2801859378814697,1.108922958374023]],path3:[[38.18899536132812,2.2801859378814697,16.108922958374023],[113.18899536132812,2.2801859378814697,16.108922958374023],[230.18899536132812,2.2801859378814697,16.108922958374023]],path4:[[38.18899536132812,2.2801859378814697,1.108922958374023],[113.18899536132812,2.2801859378814697,1.108922958374023],[230.18899536132812,2.2801859378814697,1.108922958374023]]};this.ribbonObject&&this.ribbonObject.setRibbon(e,"../images/platte.png")}clearRibbon(){this.ribbonObject&&this.ribbonObject.clearRibbon()}setCircle(){this.cirecleObject&&this.cirecleObject.setCircle("../images/circular_03.png")}clearCircle(){this.cirecleObject&&this.cirecleObject.clearCircle()}setTransparent(){this.viewer.getCamera().setSensitivity({touchPan:.9}),this.viewer.setEffectEnabled("Sketch",!0),this.viewer.setEffectParameter("Sketch","color",[0,1,1]),this.viewer.setEffectParameter("Sketch","colored",!0),this.viewer.setEffectParameter("Sketch","transparents",!0),this.viewer.setEffectParameter("Sketch","contrast",25)}setAnimatingStripe(e,t,i){this.animatingStripeObject&&this.animatingStripeObject.setAnimatingStripe(e,t,i)}removeAnimatingStripeById(e){this.animatingStripeObject&&this.animatingStripeObject.removeAnimatingStripeById(e)}setHighlightEnabled(e){this.selectElementTool.setHighlightEnabled(e)}clearAnimatingStripe(){this.animatingStripeObject&&this.animatingStripeObject.clearAnimatingStripe()}initViewCube(){let e=document.querySelector("#cubeBox"),t=this.viewer.getCamera().getData();console.log(t);let i=180*t.theta/Math.PI||0,s=-180*t.phi/Math.PI||0;e.style.transform="perspective(800px) rotateX("+s+"deg) rotateY("+i+"deg)",this.mouseInput.addMouseDownListener(t=>{this.mouseInput.addMouseMoveListener(t=>{let i=this.viewer.getCamera().getData(),s=180*i.theta/Math.PI||0,r=-180*i.phi/Math.PI||0;e.style.transform="perspective(800px) rotateX("+r+"deg) rotateY("+s+"deg)"})}),e.ondblclick=t=>{let i=t.target.className;switch(console.log(i),i){case"front":e.style.transform="perspective(800px) rotateX(0deg) rotateY(0deg)",bimfishModeloApp.switchView(0);break;case"back":e.style.transform="perspective(800px) rotateX(0deg) rotateY(180deg)",bimfishModeloApp.switchView(1);break;case"top":e.style.transform="perspective(800px) rotateX(-90deg) rotateY(-90deg)",bimfishModeloApp.switchView(4);break;case"bottom":e.style.transform="perspective(800px) rotateX(90deg) rotateY(180deg)",bimfishModeloApp.switchView(5);break;case"left":e.style.transform="perspective(800px) rotateX(0deg) rotateY(90deg)",bimfishModeloApp.switchView(2);break;case"right":e.style.transform="perspective(800px) rotateX(0deg) rotateY(-90deg)",bimfishModeloApp.switchView(3);break;default:bimfishModeloApp.switchView(6)}},e.onmousedown=t=>{let r=t||event,n=r.clientX-i,o=r.clientY-s;return document.onmousemove=t=>{let r=t||event;s=r.clientY-o,i=r.clientX-n,e.style.transform="perspective(800px) rotateX("+s+"deg) rotateY("+i+"deg)";let a=s*Math.PI/180,l=i*Math.PI/180,c=this.viewer.getCamera().getData(),h={at:c.at,distance:c.distance,fov:c.fov,phi:-a,theta:-l};this.viewer.getCamera().setData(h)},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null},!1}}}window.BimfishModelo=u}]);
//# sourceMappingURL=bimfishModelo.js.map